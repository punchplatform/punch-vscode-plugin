(()=>{"use strict";var t={654:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PunchDocumentRangeFormatter=e.MODE=void 0,Object.defineProperty(e,"__esModule",{value:!0});const n=r(496),o=r(81),a=r(781),i=r(37);e.MODE={language:"punch"};class s{constructor(){this.machine_os=i.platform(),console.log(this.machine_os),this.py=n.workspace.getConfiguration("punch-formatter").pythonPath,""==this.py&&"win32"==this.machine_os&&(this.py="python "),this.formatter=n.workspace.getConfiguration("punch-formatter").formatterPath,""==this.formatter&&(this.formatter='"'+__dirname+'/../formatter/formatter.py"')}formatDocument(t,e){return new Promise(((r,n)=>{this.format(t,e).then((t=>r(t)))}))}format(t,e){return this.w=null,new Promise(((r,i)=>{let s=" --indentWidth="+n.workspace.getConfiguration("punch-formatter").indentwidth,u=" --startLine="+(e.start.line+1),c=" --endLine="+(e.end.line+1);var m=o.exec(this.py+" "+this.formatter+"  -"+s+u+c,((o,a,i)=>{if(""!=a){let o=t.validateRange(new n.Range(e.start.line,0,e.end.line+1,0));var s=[n.TextEdit.replace(o,a)];return""!=i&&n.window.showWarningMessage("formatting warning:\n"+i),r(s)}return n.window.showErrorMessage("formatting failed:\n"+i),r(null)}));this.w=m.stdin;var h=new a.Readable;h.push(t.getText()),h.push(null),h.pipe(this.w)}))}}e.PunchDocumentRangeFormatter=class{constructor(){this.formatter=new s}provideDocumentFormattingEdits(t){return this.formatter.formatDocument(t,t.validateRange(new n.Range(0,0,Number.MAX_VALUE,Number.MAX_VALUE)))}provideDocumentRangeFormattingEdits(t,e){return this.formatter.formatDocument(t,e)}}},496:t=>{t.exports=require("vscode")},81:t=>{t.exports=require("child_process")},37:t=>{t.exports=require("os")},781:t=>{t.exports=require("stream")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}var n={};(()=>{var t=n;Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const e=r(496),o=r(654);t.activate=function(t){const r=new o.PunchDocumentRangeFormatter;t.subscriptions.push(e.commands.registerCommand("punch.Punchlet",(()=>{}))),t.subscriptions.push(e.languages.registerDocumentFormattingEditProvider(o.MODE,r))},t.deactivate=function(){}})(),module.exports=n})();